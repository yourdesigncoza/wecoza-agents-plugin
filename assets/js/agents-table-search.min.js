/**
 * Agents Table Search JavaScript (Minified)
 * @package WeCozaAgents
 * @since 1.0.0
 */
!function($){"use strict";const SEARCH_CONFIG={debounceDelay:300,minSearchLength:0,searchInputSelector:".search-input.search.form-control-sm",tableSelector:"#agents-display-data",tableRowSelector:"tbody tr",searchableColumns:[0,1,2,3,4,5,6,7]};let searchTimeout=null,$searchInput=null,$table=null,$tableRows=null,totalRows=0,visibleRows=0,filteredRows=[],isInitialized=!1;function agents_init_table_search(){if(isInitialized)return void console.log("WeCoza Agents: Already initialized, skipping duplicate initialization");if($searchInput=$(SEARCH_CONFIG.searchInputSelector),$table=$(SEARCH_CONFIG.tableSelector),$tableRows=$table.find(SEARCH_CONFIG.tableRowSelector),0===$searchInput.length)return void console.warn("WeCoza Agents: Search input not found");if(0===$table.length)return void console.warn("WeCoza Agents: Table not found");if(0===$tableRows.length)return void console.warn("WeCoza Agents: No table rows found");totalRows=$tableRows.length,visibleRows=totalRows,$searchInput.on("input keyup paste",function(){const e=$(this).val();agents_debounced_search(e)}),$searchInput.closest("form").on("reset",function(){setTimeout(function(){agents_perform_search("")},10)}),agents_add_search_status_indicator(),totalRows=$tableRows.length,visibleRows=totalRows,isInitialized=!0,console.log("WeCoza Agents: Table search and pagination initialized successfully")}function agents_debounced_search(e){searchTimeout&&clearTimeout(searchTimeout),searchTimeout=setTimeout(function(){agents_perform_search(e)},SEARCH_CONFIG.debounceDelay)}function agents_perform_search(e){const t=e.toLowerCase().trim();let n=0;$tableRows.each(function(){const e=$(this),a=e.find("td");if(0===a.length)return;let s=!0;t.length>=SEARCH_CONFIG.minSearchLength&&(s=agents_search_matches(a,t)),s?(e.show(),n++):e.hide()}),visibleRows=n,agents_update_search_status(e,visibleRows,totalRows)}function agents_search_matches(e,t){for(let n=0;n<SEARCH_CONFIG.searchableColumns.length;n++){const a=SEARCH_CONFIG.searchableColumns[n],s=e.eq(a);if(0===s.length)continue;const i=s.text().toLowerCase().trim();if(i.includes(t))return!0;if(i.split(/[\s:,.-]+/).filter(e=>e.length>0).some(e=>e.startsWith(t)))return!0}return!1}function agents_add_search_status_indicator(){if($("#agents-search-status").length>0)return;const e=$("<span>",{id:"agents-search-status",class:"badge badge-phoenix badge-phoenix-primary mb-2",style:"display: none;"});$table.before(e)}function agents_update_search_status(e,t,n){const a=$("#agents-search-status");if(0===a.length)return;if(0===e.trim().length)return void a.hide();let s="";s=0===t?`No agents found matching "${e}"`:t===n?`Showing all ${n} agents`:`Showing ${t} of ${n} agents matching "${e}"`,a.text(s).show()}function agents_reset_search(){$searchInput&&($searchInput.val(""),agents_perform_search(""))}function agents_force_reinit(){isInitialized=!1,agents_init_table_search()}function agents_get_search_stats(){return{totalRows:totalRows,visibleRows:visibleRows,searchTerm:$searchInput?$searchInput.val():"",isSearchActive:!!$searchInput&&$searchInput.val().trim().length>0}}window.WeCozaAgentsSearch={init:agents_init_table_search,reset:agents_reset_search,getStats:agents_get_search_stats,forceReinit:agents_force_reinit},$(document).ready(function(){setTimeout(function(){agents_init_table_search()},100)})}(jQuery);